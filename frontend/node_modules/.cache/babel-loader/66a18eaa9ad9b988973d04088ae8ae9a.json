{"ast":null,"code":"import _regeneratorRuntime from \"C:/AAA Kithmina/Education/SLIIT/Year 3/Y3S1/Disributed Systems - SE3020/Assignments/01/Project/Collaborative-shopping-platform/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/AAA Kithmina/Education/SLIIT/Year 3/Y3S1/Disributed Systems - SE3020/Assignments/01/Project/Collaborative-shopping-platform/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _slicedToArray from \"C:/AAA Kithmina/Education/SLIIT/Year 3/Y3S1/Disributed Systems - SE3020/Assignments/01/Project/Collaborative-shopping-platform/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _objectSpread from \"C:/AAA Kithmina/Education/SLIIT/Year 3/Y3S1/Disributed Systems - SE3020/Assignments/01/Project/Collaborative-shopping-platform/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nvar _jsxFileName = \"C:\\\\AAA Kithmina\\\\Education\\\\SLIIT\\\\Year 3\\\\Y3S1\\\\Disributed Systems - SE3020\\\\Assignments\\\\01\\\\Project\\\\Collaborative-shopping-platform\\\\frontend\\\\src\\\\dashboard\\\\contexts\\\\NotificationContext.js\",\n  _this = this,\n  _s = $RefreshSig$();\nimport { createContext, useEffect, useReducer } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar reducer = function reducer(state, action) {\n  switch (action.type) {\n    case 'LOAD_NOTIFICATIONS':\n      {\n        return _objectSpread(_objectSpread({}, state), {}, {\n          notifications: action.payload\n        });\n      }\n    case 'DELETE_NOTIFICATION':\n      {\n        return _objectSpread(_objectSpread({}, state), {}, {\n          notifications: action.payload\n        });\n      }\n    case 'CLEAR_NOTIFICATIONS':\n      {\n        return _objectSpread(_objectSpread({}, state), {}, {\n          notifications: action.payload\n        });\n      }\n    default:\n      return state;\n  }\n};\nvar NotificationContext = /*#__PURE__*/createContext({\n  notifications: [],\n  deleteNotification: function deleteNotification() {},\n  clearNotifications: function clearNotifications() {},\n  getNotifications: function getNotifications() {},\n  createNotification: function createNotification() {}\n});\nexport var NotificationProvider = function NotificationProvider(_ref) {\n  _s();\n  var children = _ref.children;\n  var _useReducer = useReducer(reducer, []),\n    _useReducer2 = _slicedToArray(_useReducer, 2),\n    state = _useReducer2[0],\n    dispatch = _useReducer2[1];\n  var deleteNotification = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(notificationID) {\n      var res;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return axios.post('/api/notification/delete', {\n                id: notificationID\n              });\n            case 3:\n              res = _context.sent;\n              dispatch({\n                type: 'DELETE_NOTIFICATION',\n                payload: res.data\n              });\n              _context.next = 10;\n              break;\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](0);\n              console.error(_context.t0);\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 7]]);\n    }));\n    return function deleteNotification(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var clearNotifications = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n      var res;\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return axios.post('/api/notification/delete-all');\n            case 3:\n              res = _context2.sent;\n              dispatch({\n                type: 'CLEAR_NOTIFICATIONS',\n                payload: res.data\n              });\n              _context2.next = 10;\n              break;\n            case 7:\n              _context2.prev = 7;\n              _context2.t0 = _context2[\"catch\"](0);\n              console.error(_context2.t0);\n            case 10:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 7]]);\n    }));\n    return function clearNotifications() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var getNotifications = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n      var res;\n      return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.prev = 0;\n              _context3.next = 3;\n              return axios.get('/api/notification');\n            case 3:\n              res = _context3.sent;\n              dispatch({\n                type: 'LOAD_NOTIFICATIONS',\n                payload: res.data\n              });\n              _context3.next = 10;\n              break;\n            case 7:\n              _context3.prev = 7;\n              _context3.t0 = _context3[\"catch\"](0);\n              console.error(_context3.t0);\n            case 10:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[0, 7]]);\n    }));\n    return function getNotifications() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n  var createNotification = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(notification) {\n      var res;\n      return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.prev = 0;\n              _context4.next = 3;\n              return axios.post('/api/notification/add', {\n                notification: notification\n              });\n            case 3:\n              res = _context4.sent;\n              dispatch({\n                type: 'CREATE_NOTIFICATION',\n                payload: res.data\n              });\n              _context4.next = 10;\n              break;\n            case 7:\n              _context4.prev = 7;\n              _context4.t0 = _context4[\"catch\"](0);\n              console.error(_context4.t0);\n            case 10:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, null, [[0, 7]]);\n    }));\n    return function createNotification(_x2) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n  useEffect(function () {\n    getNotifications();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(NotificationContext.Provider, {\n    value: {\n      getNotifications: getNotifications,\n      deleteNotification: deleteNotification,\n      clearNotifications: clearNotifications,\n      createNotification: createNotification,\n      notifications: state.notifications\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, _this);\n};\n_s(NotificationProvider, \"8u/JqpRC/mF6XFjbMf7O0gRQXow=\");\n_c = NotificationProvider;\nexport default NotificationContext;\nvar _c;\n$RefreshReg$(_c, \"NotificationProvider\");","map":{"version":3,"names":["createContext","useEffect","useReducer","axios","reducer","state","action","type","notifications","payload","NotificationContext","deleteNotification","clearNotifications","getNotifications","createNotification","NotificationProvider","children","dispatch","notificationID","post","id","res","data","console","error","get","notification"],"sources":["C:/AAA Kithmina/Education/SLIIT/Year 3/Y3S1/Disributed Systems - SE3020/Assignments/01/Project/Collaborative-shopping-platform/frontend/src/dashboard/contexts/NotificationContext.js"],"sourcesContent":["import { createContext, useEffect, useReducer } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst reducer = (state, action) => {\r\n  switch (action.type) {\r\n    case 'LOAD_NOTIFICATIONS': {\r\n      return { ...state, notifications: action.payload };\r\n    }\r\n\r\n    case 'DELETE_NOTIFICATION': {\r\n      return { ...state, notifications: action.payload };\r\n    }\r\n\r\n    case 'CLEAR_NOTIFICATIONS': {\r\n      return { ...state, notifications: action.payload };\r\n    }\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst NotificationContext = createContext({\r\n  notifications: [],\r\n  deleteNotification: () => {},\r\n  clearNotifications: () => {},\r\n  getNotifications: () => {},\r\n  createNotification: () => {}\r\n});\r\n\r\nexport const NotificationProvider = ({ children }) => {\r\n  const [state, dispatch] = useReducer(reducer, []);\r\n\r\n  const deleteNotification = async (notificationID) => {\r\n    try {\r\n      const res = await axios.post('/api/notification/delete', { id: notificationID });\r\n      dispatch({ type: 'DELETE_NOTIFICATION', payload: res.data });\r\n    } catch (e) {\r\n      console.error(e);\r\n    }\r\n  };\r\n\r\n  const clearNotifications = async () => {\r\n    try {\r\n      const res = await axios.post('/api/notification/delete-all');\r\n      dispatch({ type: 'CLEAR_NOTIFICATIONS', payload: res.data });\r\n    } catch (e) {\r\n      console.error(e);\r\n    }\r\n  };\r\n\r\n  const getNotifications = async () => {\r\n    try {\r\n      const res = await axios.get('/api/notification');\r\n      dispatch({ type: 'LOAD_NOTIFICATIONS', payload: res.data });\r\n    } catch (e) {\r\n      console.error(e);\r\n    }\r\n  };\r\n\r\n  const createNotification = async (notification) => {\r\n    try {\r\n      const res = await axios.post('/api/notification/add', { notification });\r\n      dispatch({ type: 'CREATE_NOTIFICATION', payload: res.data });\r\n    } catch (e) {\r\n      console.error(e);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    getNotifications();\r\n  }, []);\r\n\r\n  return (\r\n    <NotificationContext.Provider\r\n      value={{\r\n        getNotifications,\r\n        deleteNotification,\r\n        clearNotifications,\r\n        createNotification,\r\n        notifications: state.notifications\r\n      }}\r\n    >\r\n      {children}\r\n    </NotificationContext.Provider>\r\n  );\r\n};\r\n\r\nexport default NotificationContext;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}