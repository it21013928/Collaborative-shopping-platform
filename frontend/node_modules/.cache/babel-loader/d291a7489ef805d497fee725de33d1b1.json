{"ast":null,"code":"import _regeneratorRuntime from \"C:/AAA Kithmina/Education/SLIIT/Year 3/Y3S1/Disributed Systems - SE3020/Assignments/01/Project/Collaborative-shopping-platform/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/AAA Kithmina/Education/SLIIT/Year 3/Y3S1/Disributed Systems - SE3020/Assignments/01/Project/Collaborative-shopping-platform/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport axios from \"axios\";\nimport setAuthToken from \"../utils/setAuthToken\";\nexport var login = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(email, password) {\n    var response, token;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return axios.post(\"/api/users/login\", {\n              email: email,\n              password: password\n            });\n          case 3:\n            response = _context.sent;\n            token = response.data.token;\n            localStorage.setItem(\"token\", token);\n            setAuthToken(token);\n            return _context.abrupt(\"return\", response.data.user);\n          case 10:\n            _context.prev = 10;\n            _context.t0 = _context[\"catch\"](0);\n            console.error(_context.t0);\n            throw _context.t0;\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[0, 10]]);\n  }));\n  return function login(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\nexport var registerAccount = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(data) {\n    var response;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            _context2.next = 3;\n            return axios.post(\"/api/users/register\", data);\n          case 3:\n            response = _context2.sent;\n            console.log(response.data);\n            if (response.status === 200) {\n              window.location.reload();\n            }\n            _context2.next = 12;\n            break;\n          case 8:\n            _context2.prev = 8;\n            _context2.t0 = _context2[\"catch\"](0);\n            console.error(_context2.t0);\n            throw _context2.t0;\n          case 12:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[0, 8]]);\n  }));\n  return function registerAccount(_x3) {\n    return _ref2.apply(this, arguments);\n  };\n}();","map":{"version":3,"names":["axios","setAuthToken","login","email","password","post","response","token","data","localStorage","setItem","user","console","error","registerAccount","log","status","window","location","reload"],"sources":["C:/AAA Kithmina/Education/SLIIT/Year 3/Y3S1/Disributed Systems - SE3020/Assignments/01/Project/Collaborative-shopping-platform/frontend/src/api/auth.js"],"sourcesContent":["import axios from \"axios\";\r\nimport setAuthToken from \"../utils/setAuthToken\";\r\n\r\nexport const login = async (email, password) => {\r\n  try {\r\n    const response = await axios.post(\"/api/users/login\", {\r\n      email,\r\n      password,\r\n    });\r\n    const token = response.data.token;\r\n    localStorage.setItem(\"token\", token);\r\n    setAuthToken(token);\r\n    return response.data.user;\r\n  } catch (error) {\r\n    console.error(error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const registerAccount = async (data) => {\r\n  try {\r\n    const response = await axios.post(\"/api/users/register\", data);\r\n    console.log(response.data);\r\n    if (response.status === 200) {\r\n      window.location.reload();\r\n    }\r\n  } catch (error) {\r\n    console.error(error);\r\n    throw error;\r\n  }\r\n};\r\n"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,YAAY,MAAM,uBAAuB;AAEhD,OAAO,IAAMC,KAAK;EAAA,sEAAG,iBAAOC,KAAK,EAAEC,QAAQ;IAAA;IAAA;MAAA;QAAA;UAAA;YAAA;YAAA;YAAA,OAEhBJ,KAAK,CAACK,IAAI,CAAC,kBAAkB,EAAE;cACpDF,KAAK,EAALA,KAAK;cACLC,QAAQ,EAARA;YACF,CAAC,CAAC;UAAA;YAHIE,QAAQ;YAIRC,KAAK,GAAGD,QAAQ,CAACE,IAAI,CAACD,KAAK;YACjCE,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEH,KAAK,CAAC;YACpCN,YAAY,CAACM,KAAK,CAAC;YAAC,iCACbD,QAAQ,CAACE,IAAI,CAACG,IAAI;UAAA;YAAA;YAAA;YAEzBC,OAAO,CAACC,KAAK,aAAO;YAAC;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,CAGxB;EAAA,gBAdYX,KAAK;IAAA;EAAA;AAAA,GAcjB;AAED,OAAO,IAAMY,eAAe;EAAA,uEAAG,kBAAON,IAAI;IAAA;IAAA;MAAA;QAAA;UAAA;YAAA;YAAA;YAAA,OAEfR,KAAK,CAACK,IAAI,CAAC,qBAAqB,EAAEG,IAAI,CAAC;UAAA;YAAxDF,QAAQ;YACdM,OAAO,CAACG,GAAG,CAACT,QAAQ,CAACE,IAAI,CAAC;YAC1B,IAAIF,QAAQ,CAACU,MAAM,KAAK,GAAG,EAAE;cAC3BC,MAAM,CAACC,QAAQ,CAACC,MAAM,EAAE;YAC1B;YAAC;YAAA;UAAA;YAAA;YAAA;YAEDP,OAAO,CAACC,KAAK,cAAO;YAAC;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,CAGxB;EAAA,gBAXYC,eAAe;IAAA;EAAA;AAAA,GAW3B"},"metadata":{},"sourceType":"module"}