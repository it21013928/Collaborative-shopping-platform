{"ast":null,"code":"import _slicedToArray from \"C:/AAA Kithmina/Education/SLIIT/Year 3/Y3S1/Disributed Systems - SE3020/Assignments/01/Project/Collaborative-shopping-platform/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _objectSpread from \"C:/AAA Kithmina/Education/SLIIT/Year 3/Y3S1/Disributed Systems - SE3020/Assignments/01/Project/Collaborative-shopping-platform/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _toConsumableArray from \"C:/AAA Kithmina/Education/SLIIT/Year 3/Y3S1/Disributed Systems - SE3020/Assignments/01/Project/Collaborative-shopping-platform/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport * as React from \"react\";\nimport { CLASS_FLEX_CENTER, CLASS_FULLSIZE, cleanup, clsx, cssClass, EVENT_ON_KEY_DOWN, EVENT_ON_POINTER_CANCEL, EVENT_ON_POINTER_DOWN, EVENT_ON_POINTER_LEAVE, EVENT_ON_POINTER_MOVE, EVENT_ON_POINTER_UP, EVENT_ON_WHEEL, ImageSlide, isImageSlide, round, useContainerRect, useController, useEventCallback, useEvents, useLayoutEffect, useLightboxState, useMotionPreference } from \"../../core/index.js\";\nimport { useZoom } from \"./ZoomContext.js\";\nimport { defaultZoomProps } from \"./Zoom.js\";\nimport { ACTION_ZOOM_IN, ACTION_ZOOM_OUT } from \"./index.js\";\nimport { isResponsiveImageSlide, ResponsiveImage } from \"./ResponsiveImage.js\";\nvar getSlideRects = function getSlideRects(slide, cover, maxZoomPixelRatio, rect) {\n  var _a, _b;\n  var slideRect = {\n    width: 0,\n    height: 0\n  };\n  var maxSlideRect = {\n    width: 0,\n    height: 0\n  };\n  if (rect && isImageSlide(slide)) {\n    var width = Math.max.apply(Math, _toConsumableArray((((_a = slide.srcSet) === null || _a === void 0 ? void 0 : _a.map(function (x) {\n      return x.width;\n    })) || []).concat(slide.width ? [slide.width] : [])));\n    var height = Math.max.apply(Math, _toConsumableArray((((_b = slide.srcSet) === null || _b === void 0 ? void 0 : _b.map(function (x) {\n      return x.height;\n    })) || []).concat(slide.height ? [slide.height] : [])));\n    if (width > 0 && height > 0 && rect.width > 0 && rect.height > 0) {\n      maxSlideRect = cover ? {\n        width: Math.round(Math.min(width, rect.width / rect.height * height)),\n        height: Math.round(Math.min(height, rect.height / rect.width * width))\n      } : {\n        width: width,\n        height: height\n      };\n      maxSlideRect = {\n        width: maxSlideRect.width * maxZoomPixelRatio,\n        height: maxSlideRect.height * maxZoomPixelRatio\n      };\n      slideRect = cover ? {\n        width: Math.min(rect.width, maxSlideRect.width),\n        height: Math.min(rect.height, maxSlideRect.height)\n      } : {\n        width: Math.round(Math.min(rect.width, rect.height / height * width)),\n        height: Math.round(Math.min(rect.height, rect.width / width * height))\n      };\n    }\n  }\n  return {\n    slideRect: slideRect,\n    maxSlideRect: maxSlideRect\n  };\n};\nvar distance = function distance(pointerA, pointerB) {\n  return Math.pow(Math.pow(pointerA.clientX - pointerB.clientX, 2) + Math.pow(pointerA.clientY - pointerB.clientY, 2), 0.5);\n};\nexport var ZoomContainer = function ZoomContainer(_ref) {\n  var slide = _ref.slide,\n    offset = _ref.offset,\n    rect = _ref.rect,\n    render = _ref.render,\n    carousel = _ref.carousel,\n    animation = _ref.animation,\n    originalZoomProps = _ref.zoom,\n    on = _ref.on;\n  var _a;\n  var zoomProps = _objectSpread(_objectSpread({}, defaultZoomProps), originalZoomProps);\n  var _useLightboxState = useLightboxState(),\n    currentIndex = _useLightboxState.state.currentIndex;\n  var _React$useState = React.useState(1),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    zoom = _React$useState2[0],\n    setZoom = _React$useState2[1];\n  var _React$useState3 = React.useState(0),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    offsetX = _React$useState4[0],\n    setOffsetX = _React$useState4[1];\n  var _React$useState5 = React.useState(0),\n    _React$useState6 = _slicedToArray(_React$useState5, 2),\n    offsetY = _React$useState6[0],\n    setOffsetY = _React$useState6[1];\n  var _React$useState7 = React.useState(),\n    _React$useState8 = _slicedToArray(_React$useState7, 2),\n    imageDimensions = _React$useState8[0],\n    setImageDimensions = _React$useState8[1];\n  var activePointers = React.useRef([]);\n  var lastPointerDown = React.useRef(0);\n  var zoomAnimation = React.useRef();\n  var zoomAnimationStart = React.useRef();\n  var pinchZoomDistance = React.useRef();\n  var _useZoom = useZoom(),\n    isMinZoom = _useZoom.isMinZoom,\n    isMaxZoom = _useZoom.isMaxZoom,\n    setIsMinZoom = _useZoom.setIsMinZoom,\n    setIsMaxZoom = _useZoom.setIsMaxZoom;\n  var _useContainerRect = useContainerRect(),\n    setContainerRef = _useContainerRect.setContainerRef,\n    containerRef = _useContainerRect.containerRef,\n    containerRect = _useContainerRect.containerRect;\n  var _useController = useController(),\n    subscribeSensors = _useController.subscribeSensors,\n    controllerRef = _useController.containerRef,\n    controllerRect = _useController.containerRect;\n  var _useEvents = useEvents(),\n    subscribe = _useEvents.subscribe;\n  var reduceMotion = useMotionPreference();\n  var _getSlideRects = getSlideRects(_objectSpread(_objectSpread({}, slide), imageDimensions), carousel.imageFit === \"cover\" || \"imageFit\" in slide && slide.imageFit === \"cover\", zoomProps.maxZoomPixelRatio, containerRect),\n    slideRect = _getSlideRects.slideRect,\n    currentMaxSlideRect = _getSlideRects.maxSlideRect;\n  var maxZoom = slideRect.width ? Math.max(round(currentMaxSlideRect.width / slideRect.width, 5), 1) : 1;\n  var changeOffsets = useEventCallback(function (dx, dy, targetZoom) {\n    var newZoom = targetZoom || zoom;\n    var newOffsetX = offsetX - (dx || 0);\n    var newOffsetY = offsetY - (dy || 0);\n    var maxOffsetX = containerRect ? (slideRect.width * newZoom - containerRect.width) / 2 / newZoom : 0;\n    var maxOffsetY = containerRect ? (slideRect.height * newZoom - containerRect.height) / 2 / newZoom : 0;\n    setOffsetX(Math.min(Math.abs(newOffsetX), Math.max(maxOffsetX, 0)) * Math.sign(newOffsetX));\n    setOffsetY(Math.min(Math.abs(newOffsetY), Math.max(maxOffsetY, 0)) * Math.sign(newOffsetY));\n  });\n  var changeZoom = useEventCallback(function (value, rapid, dx, dy) {\n    if (!containerRef.current || !containerRect) return;\n    var newZoom = round(Math.min(Math.max(value + 0.001 < maxZoom ? value : maxZoom, 1), maxZoom), 5);\n    if (newZoom === zoom) return;\n    if (!rapid) {\n      zoomAnimationStart.current = window.getComputedStyle(containerRef.current).transform;\n    }\n    changeOffsets(dx ? dx * (1 / zoom - 1 / newZoom) : 0, dy ? dy * (1 / zoom - 1 / newZoom) : 0, newZoom);\n    setZoom(newZoom);\n  });\n  var handleControllerRectChange = useEventCallback(function () {\n    if (zoom > 1) {\n      if (zoom > maxZoom) {\n        changeZoom(maxZoom, true);\n      }\n      changeOffsets();\n    }\n  });\n  useLayoutEffect(handleControllerRectChange, [controllerRect.width, controllerRect.height, handleControllerRectChange]);\n  var handleZoomAndOffsetChange = useEventCallback(function () {\n    var _a, _b, _c, _d;\n    (_a = zoomAnimation.current) === null || _a === void 0 ? void 0 : _a.cancel();\n    if (zoomAnimationStart.current && containerRef.current) {\n      zoomAnimation.current = (_c = (_b = containerRef.current).animate) === null || _c === void 0 ? void 0 : _c.call(_b, [{\n        transform: zoomAnimationStart.current\n      }, {\n        transform: \"scale(\".concat(zoom, \") translateX(\").concat(offsetX, \"px) translateY(\").concat(offsetY, \"px)\")\n      }], {\n        duration: reduceMotion ? 0 : (_d = animation.zoom) !== null && _d !== void 0 ? _d : 500,\n        easing: zoomAnimation ? \"ease-out\" : \"ease-in-out\"\n      });\n      zoomAnimationStart.current = undefined;\n      if (zoomAnimation.current) {\n        zoomAnimation.current.onfinish = function () {\n          zoomAnimation.current = undefined;\n        };\n      }\n    }\n  });\n  useLayoutEffect(handleZoomAndOffsetChange, [zoom, offsetX, offsetY, handleZoomAndOffsetChange]);\n  useLayoutEffect(function () {\n    if (offset === 0) {\n      var resetZoom = function resetZoom() {\n        setZoom(1);\n        setOffsetX(0);\n        setOffsetY(0);\n        setIsMinZoom(true);\n        setIsMaxZoom(false);\n      };\n      resetZoom();\n      return function () {\n        resetZoom();\n      };\n    }\n    return function () {};\n  }, [offset, setIsMinZoom, setIsMaxZoom]);\n  useLayoutEffect(function () {\n    if (offset === 0) {\n      var newMinZoom = zoom <= 1;\n      if (newMinZoom !== isMinZoom) {\n        setIsMinZoom(newMinZoom);\n      }\n      var newMaxZoom = zoom >= maxZoom;\n      if (newMaxZoom !== isMaxZoom) {\n        setIsMaxZoom(newMaxZoom);\n      }\n    }\n  }, [offset, zoom, maxZoom, isMinZoom, isMaxZoom, setIsMinZoom, setIsMaxZoom]);\n  var translateCoordinates = React.useCallback(function (event) {\n    if (controllerRef.current) {\n      var pageX = event.pageX,\n        pageY = event.pageY;\n      var _window = window,\n        scrollX = _window.scrollX,\n        scrollY = _window.scrollY;\n      var _controllerRef$curren = controllerRef.current.getBoundingClientRect(),\n        left = _controllerRef$curren.left,\n        top = _controllerRef$curren.top,\n        width = _controllerRef$curren.width,\n        height = _controllerRef$curren.height;\n      return [pageX - left - scrollX - width / 2, pageY - top - scrollY - height / 2];\n    }\n    return [];\n  }, [controllerRef]);\n  var onKeyDown = useEventCallback(function (event) {\n    var keyboardMoveDistance = zoomProps.keyboardMoveDistance,\n      zoomInMultiplier = zoomProps.zoomInMultiplier;\n    var preventDefault = function preventDefault() {\n      event.preventDefault();\n      event.stopPropagation();\n    };\n    if (zoom > 1) {\n      var move = function move(deltaX, deltaY) {\n        preventDefault();\n        changeOffsets(deltaX, deltaY);\n      };\n      if (event.key === \"ArrowDown\") {\n        move(0, keyboardMoveDistance);\n      } else if (event.key === \"ArrowUp\") {\n        move(0, -keyboardMoveDistance);\n      } else if (event.key === \"ArrowLeft\") {\n        move(-keyboardMoveDistance, 0);\n      } else if (event.key === \"ArrowRight\") {\n        move(keyboardMoveDistance, 0);\n      }\n    }\n    var handleChangeZoom = function handleChangeZoom(zoomValue) {\n      preventDefault();\n      changeZoom(zoomValue);\n    };\n    var hasMeta = function hasMeta() {\n      return event.getModifierState(\"Meta\") || event.getModifierState(\"OS\");\n    };\n    if (event.key === \"+\" || event.key === \"=\" && hasMeta()) {\n      handleChangeZoom(zoom * zoomInMultiplier);\n    } else if (event.key === \"-\" || event.key === \"_\" && hasMeta()) {\n      handleChangeZoom(zoom / zoomInMultiplier);\n    } else if (event.key === \"0\" && hasMeta()) {\n      handleChangeZoom(1);\n    }\n  });\n  var onWheel = useEventCallback(function (event) {\n    var wheelZoomDistanceFactor = zoomProps.wheelZoomDistanceFactor,\n      scrollToZoom = zoomProps.scrollToZoom;\n    if (event.ctrlKey || scrollToZoom) {\n      if (Math.abs(event.deltaY) > Math.abs(event.deltaX)) {\n        event.stopPropagation();\n        changeZoom.apply(void 0, [zoom * (1 - event.deltaY / wheelZoomDistanceFactor), true].concat(_toConsumableArray(translateCoordinates(event))));\n        return;\n      }\n    }\n    if (zoom > 1) {\n      event.stopPropagation();\n      if (!scrollToZoom) {\n        changeOffsets(event.deltaX, event.deltaY);\n      }\n    }\n  });\n  var clearPointer = React.useCallback(function (event) {\n    var pointers = activePointers.current;\n    pointers.splice.apply(pointers, [0, pointers.length].concat(_toConsumableArray(pointers.filter(function (p) {\n      return p.pointerId !== event.pointerId;\n    }))));\n  }, []);\n  var replacePointer = React.useCallback(function (event) {\n    clearPointer(event);\n    activePointers.current.push(event);\n  }, [clearPointer]);\n  var onPointerDown = useEventCallback(function (event) {\n    var _a;\n    var doubleTapDelay = zoomProps.doubleTapDelay,\n      doubleClickDelay = zoomProps.doubleClickDelay,\n      zoomInMultiplier = zoomProps.zoomInMultiplier,\n      doubleClickMaxStops = zoomProps.doubleClickMaxStops;\n    var pointers = activePointers.current;\n    if (!((_a = containerRef.current) === null || _a === void 0 ? void 0 : _a.contains(event.target))) {\n      return;\n    }\n    if (zoom > 1) {\n      event.stopPropagation();\n    }\n    var timeStamp = event.timeStamp;\n    if (pointers.length === 0 && timeStamp - lastPointerDown.current < (event.pointerType === \"touch\" ? doubleTapDelay : doubleClickDelay)) {\n      lastPointerDown.current = 0;\n      changeZoom.apply(void 0, [zoom !== maxZoom ? zoom * Math.max(Math.pow(maxZoom, 1 / doubleClickMaxStops), zoomInMultiplier) : 1, false].concat(_toConsumableArray(translateCoordinates(event))));\n    } else {\n      lastPointerDown.current = timeStamp;\n    }\n    replacePointer(event);\n    if (pointers.length === 2) {\n      pinchZoomDistance.current = distance(pointers[0], pointers[1]);\n    }\n  });\n  var onPointerMove = useEventCallback(function (event) {\n    var pointers = activePointers.current;\n    var activePointer = pointers.find(function (p) {\n      return p.pointerId === event.pointerId;\n    });\n    if (pointers.length === 2 && pinchZoomDistance.current) {\n      event.stopPropagation();\n      replacePointer(event);\n      var currentDistance = distance(pointers[0], pointers[1]);\n      var delta = currentDistance - pinchZoomDistance.current;\n      if (Math.abs(delta) > 0) {\n        changeZoom.apply(void 0, [zoom * (1 + delta / zoomProps.pinchZoomDistanceFactor), true].concat(_toConsumableArray(pointers.map(function (x) {\n          return translateCoordinates(x);\n        }).reduce(function (acc, coordinate) {\n          return coordinate.map(function (x, i) {\n            return acc[i] + x / 2;\n          });\n        }))));\n        pinchZoomDistance.current = currentDistance;\n      }\n      return;\n    }\n    if (zoom > 1) {\n      event.stopPropagation();\n      if (activePointer) {\n        if (pointers.length === 1) {\n          changeOffsets((activePointer.clientX - event.clientX) / zoom, (activePointer.clientY - event.clientY) / zoom);\n        }\n        replacePointer(event);\n      }\n    }\n  });\n  var onPointerUp = React.useCallback(function (event) {\n    var pointers = activePointers.current;\n    if (pointers.length === 2 && pointers.find(function (p) {\n      return p.pointerId === event.pointerId;\n    })) {\n      pinchZoomDistance.current = undefined;\n    }\n    clearPointer(event);\n  }, [clearPointer]);\n  var handleZoomIn = useEventCallback(function () {\n    changeZoom(zoom * zoomProps.zoomInMultiplier);\n  });\n  var handleZoomOut = useEventCallback(function () {\n    changeZoom(zoom / zoomProps.zoomInMultiplier);\n  });\n  React.useEffect(function () {\n    return offset === 0 ? cleanup(subscribe(ACTION_ZOOM_IN, handleZoomIn), subscribe(ACTION_ZOOM_OUT, handleZoomOut), subscribeSensors(EVENT_ON_KEY_DOWN, onKeyDown), subscribeSensors(EVENT_ON_WHEEL, onWheel), subscribeSensors(EVENT_ON_POINTER_DOWN, onPointerDown), subscribeSensors(EVENT_ON_POINTER_MOVE, onPointerMove), subscribeSensors(EVENT_ON_POINTER_UP, onPointerUp), subscribeSensors(EVENT_ON_POINTER_LEAVE, onPointerUp), subscribeSensors(EVENT_ON_POINTER_CANCEL, onPointerUp)) : function () {};\n  }, [offset, subscribe, subscribeSensors, onKeyDown, onPointerDown, onPointerMove, onPointerUp, onWheel, changeZoom, handleZoomIn, handleZoomOut]);\n  var scaledRect = offset === 0 ? {\n    width: rect.width * zoom,\n    height: rect.height * zoom\n  } : rect;\n  var rendered = (_a = render.slide) === null || _a === void 0 ? void 0 : _a.call(render, slide, offset, scaledRect);\n  if (!rendered && isImageSlide(slide)) {\n    var slideProps = {\n      slide: slide,\n      offset: offset,\n      rect: rect,\n      render: render,\n      imageFit: carousel.imageFit,\n      onClick: offset === 0 ? function () {\n        var _a;\n        return (_a = on.click) === null || _a === void 0 ? void 0 : _a.call(on, currentIndex);\n      } : undefined\n    };\n    rendered = isResponsiveImageSlide(slide) ? React.createElement(ResponsiveImage, _objectSpread(_objectSpread({}, slideProps), {}, {\n      slide: slide,\n      rect: scaledRect\n    })) : React.createElement(ImageSlide, _objectSpread({\n      onLoad: function onLoad(img) {\n        return setImageDimensions({\n          width: img.naturalWidth,\n          height: img.naturalHeight\n        });\n      }\n    }, slideProps));\n  }\n  return rendered ? React.createElement(\"div\", _objectSpread({\n    ref: setContainerRef,\n    className: clsx(cssClass(CLASS_FULLSIZE), cssClass(CLASS_FLEX_CENTER))\n  }, offset === 0 ? {\n    style: {\n      transform: \"scale(\".concat(zoom, \") translateX(\").concat(offsetX, \"px) translateY(\").concat(offsetY, \"px)\")\n    }\n  } : null), rendered) : null;\n};","map":{"version":3,"names":["React","CLASS_FLEX_CENTER","CLASS_FULLSIZE","cleanup","clsx","cssClass","EVENT_ON_KEY_DOWN","EVENT_ON_POINTER_CANCEL","EVENT_ON_POINTER_DOWN","EVENT_ON_POINTER_LEAVE","EVENT_ON_POINTER_MOVE","EVENT_ON_POINTER_UP","EVENT_ON_WHEEL","ImageSlide","isImageSlide","round","useContainerRect","useController","useEventCallback","useEvents","useLayoutEffect","useLightboxState","useMotionPreference","useZoom","defaultZoomProps","ACTION_ZOOM_IN","ACTION_ZOOM_OUT","isResponsiveImageSlide","ResponsiveImage","getSlideRects","slide","cover","maxZoomPixelRatio","rect","_a","_b","slideRect","width","height","maxSlideRect","Math","max","srcSet","map","x","concat","min","distance","pointerA","pointerB","clientX","clientY","ZoomContainer","offset","render","carousel","animation","originalZoomProps","zoom","on","zoomProps","currentIndex","state","useState","setZoom","offsetX","setOffsetX","offsetY","setOffsetY","imageDimensions","setImageDimensions","activePointers","useRef","lastPointerDown","zoomAnimation","zoomAnimationStart","pinchZoomDistance","isMinZoom","isMaxZoom","setIsMinZoom","setIsMaxZoom","setContainerRef","containerRef","containerRect","subscribeSensors","controllerRef","controllerRect","subscribe","reduceMotion","imageFit","currentMaxSlideRect","maxZoom","changeOffsets","dx","dy","targetZoom","newZoom","newOffsetX","newOffsetY","maxOffsetX","maxOffsetY","abs","sign","changeZoom","value","rapid","current","window","getComputedStyle","transform","handleControllerRectChange","handleZoomAndOffsetChange","_c","_d","cancel","animate","call","duration","easing","undefined","onfinish","resetZoom","newMinZoom","newMaxZoom","translateCoordinates","useCallback","event","pageX","pageY","scrollX","scrollY","getBoundingClientRect","left","top","onKeyDown","keyboardMoveDistance","zoomInMultiplier","preventDefault","stopPropagation","move","deltaX","deltaY","key","handleChangeZoom","zoomValue","hasMeta","getModifierState","onWheel","wheelZoomDistanceFactor","scrollToZoom","ctrlKey","clearPointer","pointers","splice","length","filter","p","pointerId","replacePointer","push","onPointerDown","doubleTapDelay","doubleClickDelay","doubleClickMaxStops","contains","target","timeStamp","pointerType","onPointerMove","activePointer","find","currentDistance","delta","pinchZoomDistanceFactor","reduce","acc","coordinate","i","onPointerUp","handleZoomIn","handleZoomOut","useEffect","scaledRect","rendered","slideProps","onClick","click","createElement","onLoad","img","naturalWidth","naturalHeight","ref","className","style"],"sources":["C:/AAA Kithmina/Education/SLIIT/Year 3/Y3S1/Disributed Systems - SE3020/Assignments/01/Project/Collaborative-shopping-platform/frontend/node_modules/yet-another-react-lightbox/dist/plugins/zoom/ZoomContainer.js"],"sourcesContent":["import * as React from \"react\";\nimport { CLASS_FLEX_CENTER, CLASS_FULLSIZE, cleanup, clsx, cssClass, EVENT_ON_KEY_DOWN, EVENT_ON_POINTER_CANCEL, EVENT_ON_POINTER_DOWN, EVENT_ON_POINTER_LEAVE, EVENT_ON_POINTER_MOVE, EVENT_ON_POINTER_UP, EVENT_ON_WHEEL, ImageSlide, isImageSlide, round, useContainerRect, useController, useEventCallback, useEvents, useLayoutEffect, useLightboxState, useMotionPreference, } from \"../../core/index.js\";\nimport { useZoom } from \"./ZoomContext.js\";\nimport { defaultZoomProps } from \"./Zoom.js\";\nimport { ACTION_ZOOM_IN, ACTION_ZOOM_OUT } from \"./index.js\";\nimport { isResponsiveImageSlide, ResponsiveImage } from \"./ResponsiveImage.js\";\nconst getSlideRects = (slide, cover, maxZoomPixelRatio, rect) => {\n    var _a, _b;\n    let slideRect = { width: 0, height: 0 };\n    let maxSlideRect = { width: 0, height: 0 };\n    if (rect && isImageSlide(slide)) {\n        const width = Math.max(...(((_a = slide.srcSet) === null || _a === void 0 ? void 0 : _a.map((x) => x.width)) || []).concat(slide.width ? [slide.width] : []));\n        const height = Math.max(...(((_b = slide.srcSet) === null || _b === void 0 ? void 0 : _b.map((x) => x.height)) || []).concat(slide.height ? [slide.height] : []));\n        if (width > 0 && height > 0 && rect.width > 0 && rect.height > 0) {\n            maxSlideRect = cover\n                ? {\n                    width: Math.round(Math.min(width, (rect.width / rect.height) * height)),\n                    height: Math.round(Math.min(height, (rect.height / rect.width) * width)),\n                }\n                : { width, height };\n            maxSlideRect = {\n                width: maxSlideRect.width * maxZoomPixelRatio,\n                height: maxSlideRect.height * maxZoomPixelRatio,\n            };\n            slideRect = cover\n                ? {\n                    width: Math.min(rect.width, maxSlideRect.width),\n                    height: Math.min(rect.height, maxSlideRect.height),\n                }\n                : {\n                    width: Math.round(Math.min(rect.width, (rect.height / height) * width)),\n                    height: Math.round(Math.min(rect.height, (rect.width / width) * height)),\n                };\n        }\n    }\n    return { slideRect, maxSlideRect };\n};\nconst distance = (pointerA, pointerB) => ((pointerA.clientX - pointerB.clientX) ** 2 + (pointerA.clientY - pointerB.clientY) ** 2) ** 0.5;\nexport const ZoomContainer = ({ slide, offset, rect, render, carousel, animation, zoom: originalZoomProps, on }) => {\n    var _a;\n    const zoomProps = { ...defaultZoomProps, ...originalZoomProps };\n    const { state: { currentIndex }, } = useLightboxState();\n    const [zoom, setZoom] = React.useState(1);\n    const [offsetX, setOffsetX] = React.useState(0);\n    const [offsetY, setOffsetY] = React.useState(0);\n    const [imageDimensions, setImageDimensions] = React.useState();\n    const activePointers = React.useRef([]);\n    const lastPointerDown = React.useRef(0);\n    const zoomAnimation = React.useRef();\n    const zoomAnimationStart = React.useRef();\n    const pinchZoomDistance = React.useRef();\n    const { isMinZoom, isMaxZoom, setIsMinZoom, setIsMaxZoom } = useZoom();\n    const { setContainerRef, containerRef, containerRect } = useContainerRect();\n    const { subscribeSensors, containerRef: controllerRef, containerRect: controllerRect } = useController();\n    const { subscribe } = useEvents();\n    const reduceMotion = useMotionPreference();\n    const { slideRect, maxSlideRect: currentMaxSlideRect } = getSlideRects({ ...slide, ...imageDimensions }, carousel.imageFit === \"cover\" || (\"imageFit\" in slide && slide.imageFit === \"cover\"), zoomProps.maxZoomPixelRatio, containerRect);\n    const maxZoom = slideRect.width ? Math.max(round(currentMaxSlideRect.width / slideRect.width, 5), 1) : 1;\n    const changeOffsets = useEventCallback((dx, dy, targetZoom) => {\n        const newZoom = targetZoom || zoom;\n        const newOffsetX = offsetX - (dx || 0);\n        const newOffsetY = offsetY - (dy || 0);\n        const maxOffsetX = containerRect ? (slideRect.width * newZoom - containerRect.width) / 2 / newZoom : 0;\n        const maxOffsetY = containerRect ? (slideRect.height * newZoom - containerRect.height) / 2 / newZoom : 0;\n        setOffsetX(Math.min(Math.abs(newOffsetX), Math.max(maxOffsetX, 0)) * Math.sign(newOffsetX));\n        setOffsetY(Math.min(Math.abs(newOffsetY), Math.max(maxOffsetY, 0)) * Math.sign(newOffsetY));\n    });\n    const changeZoom = useEventCallback((value, rapid, dx, dy) => {\n        if (!containerRef.current || !containerRect)\n            return;\n        const newZoom = round(Math.min(Math.max(value + 0.001 < maxZoom ? value : maxZoom, 1), maxZoom), 5);\n        if (newZoom === zoom)\n            return;\n        if (!rapid) {\n            zoomAnimationStart.current = window.getComputedStyle(containerRef.current).transform;\n        }\n        changeOffsets(dx ? dx * (1 / zoom - 1 / newZoom) : 0, dy ? dy * (1 / zoom - 1 / newZoom) : 0, newZoom);\n        setZoom(newZoom);\n    });\n    const handleControllerRectChange = useEventCallback(() => {\n        if (zoom > 1) {\n            if (zoom > maxZoom) {\n                changeZoom(maxZoom, true);\n            }\n            changeOffsets();\n        }\n    });\n    useLayoutEffect(handleControllerRectChange, [\n        controllerRect.width,\n        controllerRect.height,\n        handleControllerRectChange,\n    ]);\n    const handleZoomAndOffsetChange = useEventCallback(() => {\n        var _a, _b, _c, _d;\n        (_a = zoomAnimation.current) === null || _a === void 0 ? void 0 : _a.cancel();\n        if (zoomAnimationStart.current && containerRef.current) {\n            zoomAnimation.current = (_c = (_b = containerRef.current).animate) === null || _c === void 0 ? void 0 : _c.call(_b, [\n                { transform: zoomAnimationStart.current },\n                {\n                    transform: `scale(${zoom}) translateX(${offsetX}px) translateY(${offsetY}px)`,\n                },\n            ], {\n                duration: reduceMotion ? 0 : (_d = animation.zoom) !== null && _d !== void 0 ? _d : 500,\n                easing: zoomAnimation ? \"ease-out\" : \"ease-in-out\",\n            });\n            zoomAnimationStart.current = undefined;\n            if (zoomAnimation.current) {\n                zoomAnimation.current.onfinish = () => {\n                    zoomAnimation.current = undefined;\n                };\n            }\n        }\n    });\n    useLayoutEffect(handleZoomAndOffsetChange, [zoom, offsetX, offsetY, handleZoomAndOffsetChange]);\n    useLayoutEffect(() => {\n        if (offset === 0) {\n            const resetZoom = () => {\n                setZoom(1);\n                setOffsetX(0);\n                setOffsetY(0);\n                setIsMinZoom(true);\n                setIsMaxZoom(false);\n            };\n            resetZoom();\n            return () => {\n                resetZoom();\n            };\n        }\n        return () => { };\n    }, [offset, setIsMinZoom, setIsMaxZoom]);\n    useLayoutEffect(() => {\n        if (offset === 0) {\n            const newMinZoom = zoom <= 1;\n            if (newMinZoom !== isMinZoom) {\n                setIsMinZoom(newMinZoom);\n            }\n            const newMaxZoom = zoom >= maxZoom;\n            if (newMaxZoom !== isMaxZoom) {\n                setIsMaxZoom(newMaxZoom);\n            }\n        }\n    }, [offset, zoom, maxZoom, isMinZoom, isMaxZoom, setIsMinZoom, setIsMaxZoom]);\n    const translateCoordinates = React.useCallback((event) => {\n        if (controllerRef.current) {\n            const { pageX, pageY } = event;\n            const { scrollX, scrollY } = window;\n            const { left, top, width, height } = controllerRef.current.getBoundingClientRect();\n            return [pageX - left - scrollX - width / 2, pageY - top - scrollY - height / 2];\n        }\n        return [];\n    }, [controllerRef]);\n    const onKeyDown = useEventCallback((event) => {\n        const { keyboardMoveDistance, zoomInMultiplier } = zoomProps;\n        const preventDefault = () => {\n            event.preventDefault();\n            event.stopPropagation();\n        };\n        if (zoom > 1) {\n            const move = (deltaX, deltaY) => {\n                preventDefault();\n                changeOffsets(deltaX, deltaY);\n            };\n            if (event.key === \"ArrowDown\") {\n                move(0, keyboardMoveDistance);\n            }\n            else if (event.key === \"ArrowUp\") {\n                move(0, -keyboardMoveDistance);\n            }\n            else if (event.key === \"ArrowLeft\") {\n                move(-keyboardMoveDistance, 0);\n            }\n            else if (event.key === \"ArrowRight\") {\n                move(keyboardMoveDistance, 0);\n            }\n        }\n        const handleChangeZoom = (zoomValue) => {\n            preventDefault();\n            changeZoom(zoomValue);\n        };\n        const hasMeta = () => event.getModifierState(\"Meta\") || event.getModifierState(\"OS\");\n        if (event.key === \"+\" || (event.key === \"=\" && hasMeta())) {\n            handleChangeZoom(zoom * zoomInMultiplier);\n        }\n        else if (event.key === \"-\" || (event.key === \"_\" && hasMeta())) {\n            handleChangeZoom(zoom / zoomInMultiplier);\n        }\n        else if (event.key === \"0\" && hasMeta()) {\n            handleChangeZoom(1);\n        }\n    });\n    const onWheel = useEventCallback((event) => {\n        const { wheelZoomDistanceFactor, scrollToZoom } = zoomProps;\n        if (event.ctrlKey || scrollToZoom) {\n            if (Math.abs(event.deltaY) > Math.abs(event.deltaX)) {\n                event.stopPropagation();\n                changeZoom(zoom * (1 - event.deltaY / wheelZoomDistanceFactor), true, ...translateCoordinates(event));\n                return;\n            }\n        }\n        if (zoom > 1) {\n            event.stopPropagation();\n            if (!scrollToZoom) {\n                changeOffsets(event.deltaX, event.deltaY);\n            }\n        }\n    });\n    const clearPointer = React.useCallback((event) => {\n        const pointers = activePointers.current;\n        pointers.splice(0, pointers.length, ...pointers.filter((p) => p.pointerId !== event.pointerId));\n    }, []);\n    const replacePointer = React.useCallback((event) => {\n        clearPointer(event);\n        activePointers.current.push(event);\n    }, [clearPointer]);\n    const onPointerDown = useEventCallback((event) => {\n        var _a;\n        const { doubleTapDelay, doubleClickDelay, zoomInMultiplier, doubleClickMaxStops } = zoomProps;\n        const pointers = activePointers.current;\n        if (!((_a = containerRef.current) === null || _a === void 0 ? void 0 : _a.contains(event.target))) {\n            return;\n        }\n        if (zoom > 1) {\n            event.stopPropagation();\n        }\n        const { timeStamp } = event;\n        if (pointers.length === 0 &&\n            timeStamp - lastPointerDown.current < (event.pointerType === \"touch\" ? doubleTapDelay : doubleClickDelay)) {\n            lastPointerDown.current = 0;\n            changeZoom(zoom !== maxZoom ? zoom * Math.max(maxZoom ** (1 / doubleClickMaxStops), zoomInMultiplier) : 1, false, ...translateCoordinates(event));\n        }\n        else {\n            lastPointerDown.current = timeStamp;\n        }\n        replacePointer(event);\n        if (pointers.length === 2) {\n            pinchZoomDistance.current = distance(pointers[0], pointers[1]);\n        }\n    });\n    const onPointerMove = useEventCallback((event) => {\n        const pointers = activePointers.current;\n        const activePointer = pointers.find((p) => p.pointerId === event.pointerId);\n        if (pointers.length === 2 && pinchZoomDistance.current) {\n            event.stopPropagation();\n            replacePointer(event);\n            const currentDistance = distance(pointers[0], pointers[1]);\n            const delta = currentDistance - pinchZoomDistance.current;\n            if (Math.abs(delta) > 0) {\n                changeZoom(zoom * (1 + delta / zoomProps.pinchZoomDistanceFactor), true, ...pointers\n                    .map((x) => translateCoordinates(x))\n                    .reduce((acc, coordinate) => coordinate.map((x, i) => acc[i] + x / 2)));\n                pinchZoomDistance.current = currentDistance;\n            }\n            return;\n        }\n        if (zoom > 1) {\n            event.stopPropagation();\n            if (activePointer) {\n                if (pointers.length === 1) {\n                    changeOffsets((activePointer.clientX - event.clientX) / zoom, (activePointer.clientY - event.clientY) / zoom);\n                }\n                replacePointer(event);\n            }\n        }\n    });\n    const onPointerUp = React.useCallback((event) => {\n        const pointers = activePointers.current;\n        if (pointers.length === 2 && pointers.find((p) => p.pointerId === event.pointerId)) {\n            pinchZoomDistance.current = undefined;\n        }\n        clearPointer(event);\n    }, [clearPointer]);\n    const handleZoomIn = useEventCallback(() => {\n        changeZoom(zoom * zoomProps.zoomInMultiplier);\n    });\n    const handleZoomOut = useEventCallback(() => {\n        changeZoom(zoom / zoomProps.zoomInMultiplier);\n    });\n    React.useEffect(() => offset === 0\n        ? cleanup(subscribe(ACTION_ZOOM_IN, handleZoomIn), subscribe(ACTION_ZOOM_OUT, handleZoomOut), subscribeSensors(EVENT_ON_KEY_DOWN, onKeyDown), subscribeSensors(EVENT_ON_WHEEL, onWheel), subscribeSensors(EVENT_ON_POINTER_DOWN, onPointerDown), subscribeSensors(EVENT_ON_POINTER_MOVE, onPointerMove), subscribeSensors(EVENT_ON_POINTER_UP, onPointerUp), subscribeSensors(EVENT_ON_POINTER_LEAVE, onPointerUp), subscribeSensors(EVENT_ON_POINTER_CANCEL, onPointerUp))\n        : () => { }, [\n        offset,\n        subscribe,\n        subscribeSensors,\n        onKeyDown,\n        onPointerDown,\n        onPointerMove,\n        onPointerUp,\n        onWheel,\n        changeZoom,\n        handleZoomIn,\n        handleZoomOut,\n    ]);\n    const scaledRect = offset === 0\n        ? {\n            width: rect.width * zoom,\n            height: rect.height * zoom,\n        }\n        : rect;\n    let rendered = (_a = render.slide) === null || _a === void 0 ? void 0 : _a.call(render, slide, offset, scaledRect);\n    if (!rendered && isImageSlide(slide)) {\n        const slideProps = {\n            slide,\n            offset,\n            rect,\n            render,\n            imageFit: carousel.imageFit,\n            onClick: offset === 0 ? () => { var _a; return (_a = on.click) === null || _a === void 0 ? void 0 : _a.call(on, currentIndex); } : undefined,\n        };\n        rendered = isResponsiveImageSlide(slide) ? (React.createElement(ResponsiveImage, { ...slideProps, slide: slide, rect: scaledRect })) : (React.createElement(ImageSlide, { onLoad: (img) => setImageDimensions({ width: img.naturalWidth, height: img.naturalHeight }), ...slideProps }));\n    }\n    return rendered ? (React.createElement(\"div\", { ref: setContainerRef, className: clsx(cssClass(CLASS_FULLSIZE), cssClass(CLASS_FLEX_CENTER)), ...(offset === 0\n            ? { style: { transform: `scale(${zoom}) translateX(${offsetX}px) translateY(${offsetY}px)` } }\n            : null) }, rendered)) : null;\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}